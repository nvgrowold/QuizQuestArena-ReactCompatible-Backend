<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title th:text="${quiz.name}">Quiz</title>
<!--    hide the submit button once clicked-->
    <script>
        function handleSubmitButton() {
            const submitButton = document.getElementById('submit-button');
            if (submitButton) {
                submitButton.style.display = 'none'; // Hide the submit button
            }
        }
    </script>
</head>
<body>
    <h1 th:text="${quiz.name}">Quiz Name</h1>
    <p th:text="'Question ' + (${currentQuestionIndex + 1}) + ' of ' + totalQuestions"></p>
    <div>
        <p th:text="${currentQuestion.text}">Question Text</p>
        <form th:action="@{/quizzes/play/{quizId}/question/{index}/submit(quizId=${quiz.id}, index=${currentQuestionIndex})}" method="post">
            <ul>
                <li th:each="option : ${currentQuestion.options}">
                    <input type="radio"
                           name="answer"
                           th:value="${option.optionText}"
                           th:checked="${currentQuestion?.playerAnswer == option.optionText}"
                           id="option-text" required>
                    <label th:for="option-text" th:text="${option.optionText}"></label>
                </li>
            </ul>
            <button type="submit">Submit Answer</button>
        </form>
    </div>

    <!-- Feedback Message and Next Button -->
    <div th:if="${feedbackMessage != null}">
        <p th:text="${feedbackMessage}" style="color: green;"></p>
        <a th:if="${currentQuestionIndex + 1 < totalQuestions}"
           th:href="@{/quizzes/play/{quizId}/question/{index}(quizId=${quiz.id}, index=${currentQuestionIndex + 1})}">
            <button>Next</button>
        </a>
        <a th:if="${currentQuestionIndex + 1 >= totalQuestions}"
           th:href="@{/quizzes/play/{quizId}/complete(quizId=${quiz.id})}">
            <button>Finish Quiz</button>
        </a>
    </div>
</body>
</html>
